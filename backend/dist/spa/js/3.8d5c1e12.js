(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"5ecd":function(t,a,e){},b8c5:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t._self._c;return a("q-page",{staticClass:"constrain-more q-pa-md"},[a("div",{staticClass:"camera-frame q-pa-md"},[a("video",{directives:[{name:"show",rawName:"v-show",value:!t.imageCaptured,expression:"!imageCaptured"}],ref:"video",staticClass:"full-width",attrs:{autoplay:""}}),a("canvas",{directives:[{name:"show",rawName:"v-show",value:t.imageCaptured,expression:"imageCaptured"}],ref:"canvas",staticClass:"full-width",attrs:{height:"240"}})]),a("div",{staticClass:"text-center q-pa-md"},[t.hasCameraSupport?a("q-btn",{attrs:{square:"",color:"grey-10",icon:"eva-camera",size:"lg",round:""},on:{click:t.captureImage}}):t._e(),a("q-file",{attrs:{label:"Choose an image",outlined:"",accept:"image/*"},on:{input:t.captureImageFallback},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"eva-attach-outline"}})]},proxy:!0}]),model:{value:t.imageUpload,callback:function(a){t.imageUpload=a},expression:"imageUpload"}}),a("div",{staticClass:"row justify-center q-ma-md"},[a("q-input",{staticClass:"col col-sm-6",attrs:{label:"Caption",dense:""},model:{value:t.post.caption,callback:function(a){t.$set(t.post,"caption",a)},expression:"post.caption"}})],1),a("div",{staticClass:"row justify-center q-ma-md"},[a("q-input",{staticClass:"col col-sm-6",attrs:{loading:t.locationLoading,label:"Location",dense:""},scopedSlots:t._u([{key:"append",fn:function(){return[!t.locationLoading&&t.locationSupported?a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"eva-navigation-2-outline"},on:{click:t.getLocation}}):t._e()]},proxy:!0}]),model:{value:t.post.location,callback:function(a){t.$set(t.post,"location",a)},expression:"post.location"}})],1),a("div",{staticClass:"row justify-center q-mt-lg"},[a("q-btn",{attrs:{unelevated:"",rounded:"",color:"primary",label:"Post Image"}})],1)],1)])},i=[],n=(e("241c"),e("dddc"),e("dea9"),e("e796"),e("c59d"),e("8b55"),e("178b"),e("fd85"),e("90fa"),e("234e"),e("feeb"),e("1c98"),e("06a3"),e("1ca0"),e("3a0c"),e("9426"),e("fbac"),e("12ed"),e("100a"),e("3051"),e("9598"),e("2731"),e("587f"),e("c60d"),e("b285"),e("6a35"),e("b391"),e("1234"),e("dfa9"),e("7c3f"),e("2d6b"),e("0312"),e("1f3b"),e("c666"),e("705d"),e("fa74"),e("f177"),e("1968"),e("862d"),e("6c31"));e("9dca");var c={name:"PageCamera",data:function(){return{post:{id:Object(n["a"])(),caption:"",location:"",photo:null,date:Date.now()},imageCaptured:!1,imageUpload:[],hasCameraSupport:!0,locationLoading:!1}},computed:{locationSupported:function(){return"geolocation"in navigator}},methods:{initCamera:function(){var t=this;navigator.mediaDevices.getUserMedia({video:!0}).then((function(a){t.$refs.video.srcObject=a})).catch((function(a){t.hasCameraSupport=!1}))},captureImage:function(){var t=this.$refs.video,a=this.$refs.canvas;a.width=t.getBoundingClientRect().width,a.height=t.getBoundingClientRect().height;var e=a.getContext("2d");e.drawImage(t,0,0,a.width,a.height),this.imageCaptured=!0,this.post.photo=this.dataURItoBlob(a.toDataURL()),this.disableCamera()},captureImageFallback:function(t){var a=this;this.post.photo=t;var e=this.$refs.canvas,o=e.getContext("2d"),i=new FileReader;i.onload=function(t){var i=new Image;i.onload=function(){e.width=i.width,e.height=i.height,o.drawImage(i,0,0),a.imageCaptured=!0},i.src=t.target.result},i.readAsDataURL(t)},disableCamera:function(){this.$refs.video.srcObject.getVideoTracks().forEach((function(t){t.stop()}))},dataURItoBlob:function(t){for(var a=atob(t.split(",")[1]),e=t.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(a.length),i=new Uint8Array(o),n=0;n<a.length;n++)i[n]=a.charCodeAt(n);var c=new Blob([o],{type:e});return c},getLocation:function(){var t=this;this.locationLoading=!0,navigator.geolocation.getCurrentPosition((function(a){t.getCityAndCountry(a)}),(function(a){t.locationError()}),{timeout:7e3})},getCityAndCountry:function(t){var a=this,e="https://geocode.xyz/".concat(t.coords.latitude,",").concat(t.coords.longitude,"?json=1");this.$axios.get(e).then((function(t){a.locationSuccess(t)})).catch((function(t){a.locationError()}))},locationSuccess:function(t){this.post.location=t.data.city,t.data.country&&(this.post.location+=", ".concat(t.data.country)),this.locationLoading=!1},locationError:function(){this.$q.dialog({title:"Error",message:"Could not find your location."}),this.locationLoading=!1}},mounted:function(){this.initCamera()},beforeDestroy:function(){this.hasCameraSupport&&this.disableCamera()}},s=c,r=(e("bf8c"),e("a6c2")),l=e("505d"),d=e("ef9c"),u=e("af15"),p=e("19dc"),f=e("a3be"),g=e("63c1"),h=e.n(g),m=Object(r["a"])(s,o,i,!1,null,null,null);a["default"]=m.exports;h()(m,"components",{QPage:l["a"],QBtn:d["a"],QFile:u["a"],QIcon:p["a"],QInput:f["a"]})},bf8c:function(t,a,e){"use strict";e("5ecd")}}]);